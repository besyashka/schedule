(()=>{"use strict";const e=()=>{const e=parseInt(document.querySelector(".schedule__month").value),c=parseInt(document.querySelector(".schedule__year").value);t(e,c)},t=(e,t)=>{const c=new Date(t,e+1,0).getDate();document.querySelectorAll(".day, .cell").forEach((e=>e.remove())),(e=>{document.querySelectorAll(".schedule__header").forEach((t=>{for(let c=1;c<=e;c++){const e=document.createElement("td");e.classList.add("day"),e.textContent=c,t.appendChild(e)}}))})(c),(e=>{document.querySelectorAll(".schedule__cell").forEach((t=>{for(let c=1;c<=e;c++){const e=document.createElement("td");e.classList.add("cell"),t.appendChild(e)}}))})(c)},c=e=>{const t=Math.ceil(e.length/2/4);return{cellsPerRow:t,cellsInTable:4*t}},l=(e,t)=>{const{cellsPerRow:l}=c(e),{startOfRow:s,endOfRow:o}=((e,t)=>{const c=Math.floor(e/t)*t;return{startOfRow:c,endOfRow:c+t-1}})(t,l);for(let c=t+1;c<=t+2&&!(c>o);c++)e[c].classList.add("inactive");for(let c=t-1;c>=t-2&&!(c<s);c--)e[c].classList.add("inactive")},s=(e,t,l)=>{const s=t.closest(".duty"),{cellsPerRow:o,cellsInTable:n}=c(e),r=s?n:2*n;for(let t=s?0:n;t<r;t++)t%o==l%o&&e[t].classList.add("inactive")},o=(e,t,o)=>{t.classList.remove("marked"),((e,t)=>{((e,t)=>{for(let c=t+1;c<=t+2;c++)c<e.length&&e[c].classList.remove("inactive");for(let c=t-1;c>=t-2;c--)c>=0&&e[c].classList.remove("inactive")})(e,t),((e,t)=>{const{cellsPerRow:l}=c(e),s=t%l;for(let t=0;t<e.length;t++)t%l===s&&e[t].classList.remove("inactive")})(e,t),(()=>{const e=document.querySelectorAll(".cell");e.forEach(((t,c)=>{t.classList.contains("marked")&&(s(e,t,c),l(e,c))}))})()})(e,o)};let n=0,r=0;const a=(e,t,c)=>{document.querySelectorAll(t)[c].textContent=e},d=()=>{const e=document.querySelectorAll(".cell");e.forEach(((t,c)=>{t.addEventListener("click",(()=>{t.classList.contains("marked")?o(e,t,c):((e,t,c)=>{t.classList.contains("inactive")||(t.classList.add("marked"),l(e,c),s(e,t,c))})(e,t,c)}))}))};e(),document.querySelector(".button__generate").addEventListener("click",(()=>{e(),d(),(()=>{const e=document.querySelectorAll(".schedule__cell_duty"),t=document.querySelectorAll(".schedule__cell_assistant");n=0,r=0,e.forEach((e=>e.textContent="")),t.forEach((e=>e.textContent=""))})()})),d(),document.querySelector(".button__add").addEventListener("click",(()=>{(e=>{const t=document.querySelector('input[name="role"]:checked').value;n>=4&&(n=0),r>=4&&(r=0),"duty"===t?(a(e,".schedule__cell_duty",n),n++):"assistant"===t&&(a(e,".schedule__cell_assistant",r),r++)})(document.querySelector(".surname").value.trim())}))})();